---
- name: "[ GNOME KEYRING ]"
  hosts: all

  tasks:
    - name: Ensure required packages are present
      become: true
      ansible.builtin.package:
        name: "{{ item }}"
        state: present
      loop:
        - gnome-keyring
        - seahorse

    - name: Configure pam sddm
      become: true
      ansible.builtin.lineinfile:
        path: "/etc/pam.d/sddm"
        line: "{{ item }}"
      loop:
        - "auth        optional    pam_gnome_keyring.so"
        - "session     optional    pam_gnome_keyring.so auto_start"
